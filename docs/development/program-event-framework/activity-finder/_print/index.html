<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.139.4"><link rel=canonical type=text/html href=/docs/development/program-event-framework/activity-finder/><link rel=alternate type=application/rss+xml href=/docs/development/program-event-framework/activity-finder/index.xml><meta name=robots content="noindex, nofollow"><link rel=icon type=image/svg+xml href=/favicons/favicon.svg><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon.png><link rel=icon type=image/png href=/favicons/favicon-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/favicon-64x64.png sizes=64x64><link rel=icon type=image/png href=/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/favicon-128x128.png sizes=128x128><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Activity Finder | YMCA Website Services</title>
<meta name=description content="Provides an interactive tool to help members find and book activities."><meta property="og:url" content="/docs/development/program-event-framework/activity-finder/"><meta property="og:site_name" content="YMCA Website Services"><meta property="og:title" content="Activity Finder"><meta property="og:description" content="Provides an interactive tool to help members find and book activities."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Activity Finder"><meta itemprop=description content="Provides an interactive tool to help members find and book activities."><meta itemprop=dateModified content="2024-06-25T16:49:17-05:00"><meta itemprop=wordCount content="1150"><meta itemprop=keywords content="Decoupled Applications,Activity Finder"><meta name=twitter:card content="summary"><meta name=twitter:title content="Activity Finder"><meta name=twitter:description content="Provides an interactive tool to help members find and book activities."><link rel=preload href=/scss/main.min.4593808e509861cf644d560a3c9a482361ec778df6f7409565d12bbfd4235859.css as=style integrity="sha256-RZOAjlCYYc9kTVYKPJpII2Hsd43290CVZdErv9QjWFk=" crossorigin=anonymous><link href=/scss/main.min.4593808e509861cf644d560a3c9a482361ec778df6f7409565d12bbfd4235859.css rel=stylesheet integrity="sha256-RZOAjlCYYc9kTVYKPJpII2Hsd43290CVZdErv9QjWFk=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script><link rel=preload href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.2 as=style integrity="sha512-TW5eKlwwg7OfQUVBqxjp94/uqtjJJbhkRE3++XGEQjAL1n3y//QVqS3acPkwqkzInaFRtj+w05uyxDbfDXiI1A==" crossorigin=anonymous onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.2 integrity="sha512-TW5eKlwwg7OfQUVBqxjp94/uqtjJJbhkRE3++XGEQjAL1n3y//QVqS3acPkwqkzInaFRtj+w05uyxDbfDXiI1A==" crossorigin=anonymous></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-3GMSKCY94X"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3GMSKCY94X")}</script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 288 221" enable-background="new 0 0 288 221"><path fill="#fff" d="M258.829.94h-82.891c-6.134.0-11.106 4.972-11.106 11.105.0 1.912.42 3.702 1.326 5.272l41.607 72.061a11.09 11.09.0 009.617 5.57c4.117.0 7.701-2.244 9.619-5.57l41.604-72.061c.908-1.57 1.328-3.36 1.328-5.272C269.934 5.912 264.967.94 258.829.94m17.034 6.017a6.07 6.07.0 016.074-6.068 6.064 6.064.0 016.062 6.068 6.065 6.065.0 01-6.062 6.071 6.07 6.07.0 01-6.074-6.071m1.252.0a4.832 4.832.0 004.822 4.817 4.83 4.83.0 004.811-4.817 4.82 4.82.0 00-4.811-4.81 4.823 4.823.0 00-4.822 4.81z"/><g><defs><rect id="SVGID_1_" width="288" height="221"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_2_)" fill="#fff" d="M284.217 10.003h-.578c-.225.0-.344-.027-.51-.221l-1.645-2.056h-.438v1.948c0 .248-.102.329-.314.329h-.4c-.273.0-.367-.053-.367-.329V4.221c0-.296.174-.307.367-.307h1.754c1 0 1.209.059 1.566.413.312.326.463.892.463 1.703.0 1.025-.412 1.601-1.344 1.67l1.562 1.866c.181.216.149.437-.116.437m-1.475-5.117c-.244-.12-1.385-.065-1.695-.065V6.82h1.162c.412.0.607-.067.719-.207.064-.107.131-.218.131-.665.0-.672-.108-.949-.317-1.062zm-152.965 98.36c0 .01.01.017.01.022v-.009l-.01-.013m73.032 1.39-.457-.79-52.35-90.674C145.639 5.613 137.273.94 127.98.94H85.549a8.573 8.573.0 00-8.571 8.57c0 1.471.34 2.881 1.024 4.06l51.785 89.698a27.014 27.014.0 013.728 13.735c0 4.864-1.281 9.424-3.517 13.371l-45.029 78.001c-.683 1.172-1.021 2.584-1.021 4.057a8.567 8.567.0 008.57 8.568h43.537c9.289.0 17.658-4.67 22.021-12.228l.896-1.56 43.299-74.998.807-1.395c2.207-3.827 3.227-8.203 3.227-12.854.0-4.846-1.242-9.423-3.496-13.329z"/></g><path fill="#fff" d="M83.18 140.865c-.793.0-1.584.327-2.309.457-2.436.527-5.139 1.058-8.037 1.058-1.582.0-3.035-.332-3.957-.726-2.041-.921-2.238-3.493-2.174-6.792h16.079c2.306.0 2.767-.392 2.767-4.016.0-4.223-.392-8.371-2.435-11.334-1.911-2.703-5.208-4.089-10.677-4.089-5.798.0-9.427 1.517-11.4 4.353-2.047 2.896-2.641 6.785-2.641 12.582.0 6.53.924 10.817 3.695 13.385 2.173 2.042 5.735 3.09 10.68 3.09 2.831.0 6.717-.261 9.942-.856 2.047-.327 2.375-1.378 2.375-2.898.0-.726.0-1.518-.127-2.173-.201-.858-.795-2.041-1.781-2.041M66.703 128.47c0-4.807.992-6.453 5.734-6.453 4.483.0 5.071 1.709 5.071 5.795v1.255H66.703v-.597zm-23.548-13.046c-3.562.0-6.722 1.184-8.902 2.239v-12.191c0-1.251-.524-2.838-2.566-2.838h-2.965c-1.91.0-2.899.594-2.899 2.838v39.875c0 1.578.526 2.629 2.375 2.629h3.489c2.042.0 2.566-1.119 2.566-2.964V129.91c0-4.726.978-6.338 5.633-6.338 4.406.0 4.988 1.679 4.988 5.688v1.232h-.018c.01.635.016 1.357.016 2.168v12.352c0 1.98.654 2.964 2.368 2.964h3.5c2.035.0 2.566-1.119 2.566-2.964v-20.227c0-4.29-2.045-9.361-10.151-9.361zM18.977 123.327h-7.115v13.25c0 3.095.133 4.283.396 4.808.198.335.532.529.987.529 1.849.0 3.884-.987 5.406-.987 1.451.0 1.783 1.12 1.783 1.841v2.373c0 2.439-.664 3.103-2.769 3.298-2.11.196-3.559.328-5.739.328-6.989.0-8.5-2.57-8.5-10.413v-15.026H1.58c-1.248.0-1.58-.855-1.58-1.908v-2.836c0-1.65.656-2.174 1.777-2.174h1.649v-5.34c0-2.24.922-2.902 2.834-2.902h2.967c2.041.0 2.635 1.648 2.635 2.902v5.34h6.461c1.447.0 2.24.198 2.24 2.109v2.304c0 2.239-.398 2.504-1.586 2.504m155.151 76.898 5.053 8.552 4.775 2.756c.662.384.797.88.422 1.517l-.541.961c-.43.733-.824.945-1.598.496l-4.598-2.654-10.481-.123c-.293.007-.572-.034-.773-.151-.549-.317-.414-.92-.205-1.278l.689-1.195c.383-.665.756-.745 1.287-.737l7.179.144-3.701-6.226c-.268-.45-.364-.806.021-1.471l.566-.976c.334-.582.795-.668 1.219-.422.266.151.539.549.686.807M196.514 192.042l-.539.93c-.383.664-.857.715-1.508.402l-9.376-4.642c.388.461.945 1.079 1.377 1.563 1.676 1.976 3.5 4.006 4.571 5.369.43.543.584.991.164 1.715l-.332.582c-.426.734-.876.804-1.562.701-1.713-.25-4.413-.767-6.963-1.234-.646-.106-1.436-.326-2.029-.43l8.705 5.804c.602.406.793.845.412 1.502l-.541.937c-.398.687-.867 1.035-1.652.496l-12.277-8.604c-.76-.526-.567-1.065-.258-1.601l.705-1.222c.357-.618.74-.816 1.344-.734 2.521.359 6.938 1.219 10.326 1.811-2.209-2.633-5.166-6.028-6.736-8.032-.371-.481-.391-.906-.031-1.528l.703-1.222c.309-.531.682-.97 1.516-.578l13.585 6.336c.859.4.794.986.396 1.679M203.475 180.39c-.486.998-.758 1.57-1.35 2.595-.477.825-1.117 1.787-1.781 2.468-2.541 2.655-5.602 1.803-9.447-.416-6.528-3.771-6.558-6.541-4.058-10.873.594-1.023.955-1.554 1.574-2.47.592-.873.949-.992 1.449-.703l.731.421c.795.459.984.75.574 1.454-.475.828-.818 1.164-1.497 2.341-.414.711-1.012 1.903-1.088 2.602-.178 1.642 1.554 2.699 4.108 4.168 2.512 1.453 4.541 2.453 6.01.727.299-.361.705-.957 1.102-1.645.68-1.178.803-1.645 1.273-2.469.408-.709.752-.687 1.555-.224l.734.421c.488.281.572.656.111 1.603M211.623 165.868l-.705 1.221c-.398.688-.844.697-1.381.594l-3.344-.621c-.529.97-.936 1.679-1.505 2.654a94.672 94.672.0 01-1.493 2.539l2.105 2.406c.486.545.715.916.277 1.666l-.588 1.028c-.438.758-.701.75-1.031.556-.135-.072-.365-.296-.588-.576l-10.078-11.888c-.547-.648-.719-1.07-.242-1.889l.523-.909c.473-.826.93-.892 1.736-.75l15.719 2.678c.139.019.273.041.391.106.55.319.409.828.204 1.185m-14.471-.537 4.211 4.809c.297-.516.621-1.127.992-1.768.398-.693.691-1.148 1.062-1.791l-6.265-1.25z"/></svg></span><span class=navbar-brand__name>YMCA Website Services</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/community/><span>Community</span></a></li><li class=nav-item><a class=nav-link href=/docs/glossary/><span>Glossary</span></a></li><li class=nav-item><a class=nav-link href=/roadmap/><span>Roadmap</span></a></li><li class=nav-item><a class=nav-link href=/blog/><span>Updates</span></a></li><li class="td-light-dark-menu nav-item dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-1></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/development/program-event-framework/activity-finder/>Return to the regular view of this page</a>.</p></div><h1 class=title>Activity Finder</h1><div class=lead>Provides an interactive tool to help members find and book activities.</div><ul><li>1: <a href=#pg-6baf5f590747c78e0e74a2ef64afd201>Adding Activity Finder to your site</a></li><ul></ul><li>2: <a href=#pg-b2056fc5cab10f929a44c332b8102fc8>Bootstrap version support for Activity Finder</a></li><li>3: <a href=#pg-64bd222410c78abcfc9f90c814006a69>Configuring Solr for Activity Finder</a></li><ul></ul></ul><div class=content><p><a href=https://github.com/YCloudYUSA/yusaopeny_activity_finder target=_blank>YCloudYUSA/yusaopeny_activity_finder</a> is bundled as a &ldquo;decoupled application&rdquo; that ships with the YMCA Website Services distribution.</p><h2 id=requirements>Requirements<a class=td-heading-self-link href=#requirements aria-label="Heading self-link"></a></h2><p>This module requires the following modules:</p><ul><li><a href=https://github.com/open-y-subprojects/openy_map target=_blank>openy_map</a> (For pulling the list of location-related content types.)</li></ul><p>This module also requires one of the following to store data:</p><ul><li>A Solr server (preferably a server or index per-environment).</li><li>A subscription with access to the
<a href=https://api.daxko.com/v3/docs target=_blank>Daxko API</a>.</li></ul><h2 id=recommended-modules>Recommended modules<a class=td-heading-self-link href=#recommended-modules aria-label="Heading self-link"></a></h2><p>Activity Finder is most often used with a
<a href=https://ds-docs.y.org/docs/development/program-event-framework/#syncers target=_blank>syncer</a> to pull data from an external source.</p><h2 id=installation>Installation<a class=td-heading-self-link href=#installation aria-label="Heading self-link"></a></h2><p>Activity Finder version 4 is the current major version. Prior to <code>9.2.10.0</code>, the distribution required <code>^3.1 || ^4.0</code>, allowing you to choose which version you want to use depending on the project requirements.</p><h3 id=deprecations>Deprecations<a class=td-heading-self-link href=#deprecations aria-label="Heading self-link"></a></h3><p>Outdated implementations are not removed immediately, allowing you to update your projects and migrate to new components without breaking your site. They are marked with <code>[deprecated]</code> notices in the next version and are planned to be removed in the future releases.</p><h3 id=new-projects>New Projects<a class=td-heading-self-link href=#new-projects aria-label="Heading self-link"></a></h3><p>Install as you would normally install a contributed Drupal module. For further
information, see
<a href=https://www.drupal.org/docs/extending-drupal/installing-drupal-modules target=_blank>Installing Drupal Modules</a>.</p><p>New projects should enable:</p><ul><li>Activity Finder (<code>openy_activity_finder</code>)</li></ul><p>then choose one or both of the front ends:</p><ul><li>LB (Layout Builder) Activity Finder (<code>lb_activity_finder</code>)</li><li>Open Y Paragraph Activity Finder (<code>openy_prgf_activity_finder_4</code>)</li></ul><p>and finally enable one of these data stores:</p><ul><li>Search API Solr (<code>search_api_solr</code>)</li><li>Daxko API v2 integration (<code>openy_daxko2</code>)</li></ul><h3 id=existing-projects>Existing Projects<a class=td-heading-self-link href=#existing-projects aria-label="Heading self-link"></a></h3><p>You have a choice of either staying on the same version you use or to update to the next version. It depends on your project requirements and customizations. We recommend updating to the latest release if you have resources for it.</p><h3 id=update-from-version-3x-to-version-4x>Update from version 3.x to version 4.x<a class=td-heading-self-link href=#update-from-version-3x-to-version-4x aria-label="Heading self-link"></a></h3><p>Activity Finder is a complex functionality, it connects together many different
pieces and might require additional steps to make it working. The list of
actions below outlines the major steps to get Activity Finder updated to
version 4.</p><ul><li>Update the codebase using the composer command:
<code>composer require ycloudyusa/yusaopeny_activity_finder:&amp;#34;^4.0&amp;#34;</code></li><li>Run database updates <code>drush -y updb</code>.<ul><li>Verify there were no errors and updates went fine.</li></ul></li><li>Install the new "Open Y Paragraph Activity Finder" (<code>openy_prgf_activity_finder_4</code>):
<code>drush en openy_prgf_activity_finder_4</code></li><li>Create or update a existing Landing Page with Activity Finder.</li><li>Add Activity Finder paragraph (replace the deprecated paragraph), configure
it and save the page.<ul><li>Verify the page and Activity Finder functionality is working fine</li></ul></li><li>The previous version of Activity Finder used 2 landing pages with 2 paragraph
types - one for wizard and another one for results. Find and remove these
pages.</li><li>Uninstall "OpenY Paragraph Activity Finder" (<code>openy_prgf_activity_finder</code>).</li><li>Uninstall "OpenY Paragraph Activity Finder Search" (<code>openy_paragraph_activity_finder_search</code>).</li></ul><h2 id=configuration>Configuration<a class=td-heading-self-link href=#configuration aria-label="Heading self-link"></a></h2><h3 id=set-up-solr>Set up Solr<a class=td-heading-self-link href=#set-up-solr aria-label="Heading self-link"></a></h3><p>In order to install Solr -
<a href=https://www.drupal.org/node/2502203 target=_blank>check the documentation on Drupal.org</a>.</p><p>After enabling the above modules you should visit <code>/admin/config/search/search-api</code> and obtain config.zip from preconfigured by Open Y Solr Server setup
<img src=https://user-images.githubusercontent.com/563412/105169707-90ba2280-5b24-11eb-9c0c-fab09b336723.png alt=image></p><p>This configuration should be installed on your Solr server as an independent core. it should be extracted to the conf directory of a solr core</p><p><img src=https://user-images.githubusercontent.com/563412/105169758-ad565a80-5b24-11eb-81c3-b29c8b513a7a.png alt=image></p><p>Once it is done - ensure the name of your core from core.properties file added to Solr Server config in Open Y
<img src=https://user-images.githubusercontent.com/563412/105169816-c0692a80-5b24-11eb-9254-6abc32a0583d.png alt=image></p><p>Solr server configuration could be found in Dropdown at /admin/config/search/search-api
<img src=https://user-images.githubusercontent.com/563412/105169887-d4149100-5b24-11eb-8a7c-d5186b8005bb.png alt=image>
<img src=https://user-images.githubusercontent.com/563412/105169954-eb537e80-5b24-11eb-8e21-3df8f01a8c14.png alt=image></p><p>If you prefer drush configuration you may use commands below, just replace SOLR_CORE_IS_HERE with real core name</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>drush cset -y search_api.server.solr backend_config.connector_config.host 127.0.0.1 -y
</span></span><span class=line><span class=cl>drush cset -y search_api.server.solr backend_config.connector_config.core <span class=si>${</span><span class=nv>SOLR_CORE_IS_HERE</span><span class=si>}</span> -y
</span></span><span class=line><span class=cl>drush search-api:reset-tracker
</span></span><span class=line><span class=cl>drush search-api:index
</span></span></code></pre></div><p>Once this is done you should see Solr Server as Index as Enabled on a <code>/admin/config/search/search-api</code></p><p>If you installed Open Y with Demo content now it is time to create a Landing Page with the Activity Finder v4 component on it.</p><p>In Open Y we have a specially created module which can this for you</p><p>Enable openy_prgf_af4_demo by drush command</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>drush en openy_prgf_af4_demo
</span></span></code></pre></div><p>and you’d get /activity-finder-v4 Landing Page created automatically which should look like
<img src=https://user-images.githubusercontent.com/563412/105170014-04f4c600-5b25-11eb-8a4a-b2952d86e7d3.png alt=image></p><p>when you visited it.
By visiting /activity-finder-v4?step=results or clicking on suggested buttons you should see results, activities with filters and all other functionality, shipped with Activity Finder v4
For the Demo content from OpenY, it should look like
<img src=https://user-images.githubusercontent.com/563412/105170087-1dfd7700-5b25-11eb-9e57-5db48e41af5e.png alt=image></p><h3 id=set-trusted-redirect-host-patterns>Set Trusted Redirect Host patterns<a class=td-heading-self-link href=#set-trusted-redirect-host-patterns aria-label="Heading self-link"></a></h3><p>Activity Finder has a feature to track redirects to 3rd party systems. In order
to control the URLs to redirect to you should use the trusted host patterns.
This feature works similar to Drupal core trusted_host_patterns setting.</p><p>Example - add this section to the settings.php:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Trusted hosts to redirect to for Activity Finder.
</span></span><span class=line><span class=cl>$settings[&amp;#39;activity_finder_trusted_redirect_host_patterns&amp;#39;] = [
</span></span><span class=line><span class=cl>  &amp;#39;^apm\.activecommunities\.com$&amp;#39;,
</span></span><span class=line><span class=cl>];
</span></span></code></pre></div><p>It is also recommended to disallow these paths in robots.txt:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># Activity Finder redirects
</span></span><span class=line><span class=cl>Disallow: /af/register-redirect/
</span></span><span class=line><span class=cl>Disallow: /index.php/af/register-redirect/
</span></span></code></pre></div><h3 id=add-the-activity-finder-block>Add the Activity Finder block<a class=td-heading-self-link href=#add-the-activity-finder-block aria-label="Heading self-link"></a></h3><p>See
<a href=https://ds-docs.y.org/docs/user-documentation/schedules/activity-finder/ target=_blank>the full documentation on Activity Finder</a> for information on how to add the block to your page and block options.</p><h2 id=troubleshooting-amp-faq>Troubleshooting & FAQ<a class=td-heading-self-link href=#troubleshooting-amp-faq aria-label="Heading self-link"></a></h2><p>To demo Activity Finder, see these sandboxes:</p><ul><li>Activity Finder v4<ul><li>Carnation
<a href=https://sandbox-carnation-cus-d9.y.org/activity-finder-v4 target=_blank>https://sandbox-carnation-cus-d9.y.org/activity-finder-v4</a></li><li>Lily
<a href=https://sandbox-lily-cus-d9.y.org/activity-finder-v4 target=_blank>https://sandbox-lily-cus-d9.y.org/activity-finder-v4</a></li><li>Rose
<a href=https://sandbox-rose-cus-d9.y.org/activity-finder-v4 target=_blank>https://sandbox-rose-cus-d9.y.org/activity-finder-v4</a></li></ul></li><li>Activity Finder v3<ul><li>Carnation
<a href=https://sandbox-carnation-cus-d9.y.org/activity-finder target=_blank>https://sandbox-carnation-cus-d9.y.org/activity-finder</a></li><li>Lily
<a href=https://sandbox-lily-cus-d9.y.org/activity-finder target=_blank>https://sandbox-lily-cus-d9.y.org/activity-finder</a></li><li>Rose
<a href=https://sandbox-rose-cus-d9.y.org/activity-finder target=_blank>https://sandbox-rose-cus-d9.y.org/activity-finder</a></li></ul></li></ul><h3 id=limitations-with-using-daxko-backend>Limitations with using Daxko backend<a class=td-heading-self-link href=#limitations-with-using-daxko-backend aria-label="Heading self-link"></a></h3><p>When using the Daxko backend. Developers should be aware of these limitations:</p><ul><li>We can't use home branch functionality on start screen.</li><li>We have to use Legacy mode.</li><li>We can't display count of result for each age on the age's wizard step.</li><li>We can't display count of available spots for each activity, before user click by activity details.</li><li>Limited pager on results page. We can display only previous and next page link and can't display count of pages.</li></ul><h3 id=how-to-override-processresults-in-activity-finder>How to override processResults in Activity Finder<a class=td-heading-self-link href=#how-to-override-processresults-in-activity-finder aria-label="Heading self-link"></a></h3><p>See <code>openy_activity_finder.api.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=sd>/**
</span></span></span><span class=line><span class=cl><span class=sd> * Implements hook_activity_finder_program_process_results_alter().
</span></span></span><span class=line><span class=cl><span class=sd> */</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>custom_module_activity_finder_program_process_results_alter</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>amp</span><span class=p>;</span><span class=nv>$data</span><span class=p>,</span> <span class=nx>NodeInterface</span> <span class=nv>$entity</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Get formatted session data from some custom service.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nv>$formatted_session</span> <span class=o>=</span> <span class=nx>\Drupal</span><span class=o>::</span><span class=na>service</span><span class=p>(</span><span class=o>&amp;</span><span class=c1>#39;ymca_class_page.data_provider&amp;#39;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>-&amp;</span><span class=nx>gt</span><span class=p>;</span><span class=nx>formatSessions</span><span class=p>([</span><span class=nv>$entity</span><span class=p>],</span> <span class=k>FALSE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nv>$formatted_session</span> <span class=o>=</span> <span class=nx>reset</span><span class=p>(</span><span class=nv>$formatted_session</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Fix pricing according to YMCA price customization.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nv>$data</span><span class=p>[</span><span class=o>&amp;</span><span class=c1>#39;price&amp;#39;] = &amp;#39;&amp;#39;;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>empty</span><span class=p>(</span><span class=nv>$formatted_session</span><span class=p>[</span><span class=o>&amp;</span><span class=c1>#39;prices&amp;#39;])) {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>foreach</span> <span class=p>(</span><span class=nv>$formatted_session</span><span class=p>[</span><span class=o>&amp;</span><span class=c1>#39;prices&amp;#39;] as $price) {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nv>$data</span><span class=p>[</span><span class=o>&amp;</span><span class=c1>#39;price&amp;#39;] .= implode(&amp;#39; &amp;#39;, $price) . &amp;#39;&amp;lt;br&amp;gt;&amp;#39;;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Fix availability and registration according to YMCA customization.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nv>$messages</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=o>&amp;</span><span class=c1>#39;begun&amp;#39; =&amp;gt; t(&amp;#39;This class has begun.&amp;#39;),
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>&amp;</span><span class=c1>#39;will_open&amp;#39; =&amp;gt; t(&amp;#39;Registration for this class opens shortly. Please check back.&amp;#39;),
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>&amp;</span><span class=c1>#39;inperson&amp;#39; =&amp;gt; t(&amp;#39;Online registration is closed. Visit a YMCA branch to register.&amp;#39;),
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>&amp;</span><span class=c1>#39;included_in_membership&amp;#39; =&amp;gt; t(&amp;#39;Included in Membership&amp;#39;),
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>isset</span><span class=p>(</span><span class=nv>$messages</span><span class=p>[</span><span class=nv>$formatted_session</span><span class=p>[</span><span class=o>&amp;</span><span class=c1>#39;reg_state&amp;#39;]])) {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nv>$data</span><span class=p>[</span><span class=o>&amp;</span><span class=c1>#39;availability_note&amp;#39;] = $messages[$formatted_session[&amp;#39;reg_state&amp;#39;]];
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=how-to-add-external-functionality-to-analytics-event>How to add external functionality to analytics event<a class=td-heading-self-link href=#how-to-add-external-functionality-to-analytics-event aria-label="Heading self-link"></a></h3><p>See <code>openy_af4_vue_app/main.js</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// Listen to a custom event to pass events in Google Analytics.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;</span><span class=nx>openy_activity_finder_event</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;,</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=o>=&amp;</span><span class=nx>gt</span><span class=p>;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>action</span><span class=p>,</span> <span class=nx>label</span><span class=p>,</span> <span class=nx>value</span><span class=p>,</span> <span class=nx>category</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>detail</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>gtag</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>window</span><span class=p>.</span><span class=nx>gtag</span><span class=p>(</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;</span><span class=nx>event</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;,</span> <span class=nx>action</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>event_category</span><span class=o>:</span> <span class=nx>category</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>event_label</span><span class=o>:</span> <span class=nx>label</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>value</span><span class=o>:</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>ga</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>window</span><span class=p>.</span><span class=nx>ga</span><span class=p>(</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;</span><span class=nx>send</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;,</span> <span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;</span><span class=nx>event</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>action</span><span class=p>,</span> <span class=nx>label</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h4 id=example-of-custom-event>Example of custom event<a class=td-heading-self-link href=#example-of-custom-event aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;</span><span class=nx>openy_activity_finder_event</span><span class=o>&amp;</span><span class=err>#</span><span class=mi>39</span><span class=p>;,</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=o>=&amp;</span><span class=nx>gt</span><span class=p>;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>action</span><span class=p>,</span> <span class=nx>label</span><span class=p>,</span> <span class=nx>value</span><span class=p>,</span> <span class=nx>category</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>detail</span> <span class=c1>// Properties you can use for analitics.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>...</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>your_functionality</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h3 id=add-custom-component-in-between-of-results>Add custom component in between of results<a class=td-heading-self-link href=#add-custom-component-in-between-of-results aria-label="Heading self-link"></a></h3><p>it allows flexibility in terms of results rendering for the developer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>          &amp;lt;ResultsList
</span></span><span class=line><span class=cl>            :results=&amp;#34;data.table&amp;#34;
</span></span><span class=line><span class=cl>            :ages=&amp;#34;ages&amp;#34;
</span></span><span class=line><span class=cl>            :selected-ages=&amp;#34;selectedAges&amp;#34;
</span></span><span class=line><span class=cl>            :legacy-mode=&amp;#34;legacyMode&amp;#34;
</span></span><span class=line><span class=cl>            :disable-spots-available=&amp;#34;disableSpotsAvailable&amp;#34;
</span></span><span class=line><span class=cl>            @showActivityDetailsModal=&amp;#34;showActivityDetailsModal($event)&amp;#34;
</span></span><span class=line><span class=cl>          /&amp;gt;
</span></span></code></pre></div><p>can be changed to this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>          &amp;lt;ResultsList
</span></span><span class=line><span class=cl>            :results=&amp;#34;data.table.slice(0, 2)&amp;#34;
</span></span><span class=line><span class=cl>            :ages=&amp;#34;ages&amp;#34;
</span></span><span class=line><span class=cl>            :selected-ages=&amp;#34;selectedAges&amp;#34;
</span></span><span class=line><span class=cl>            :legacy-mode=&amp;#34;legacyMode&amp;#34;
</span></span><span class=line><span class=cl>            :disable-spots-available=&amp;#34;disableSpotsAvailable&amp;#34;
</span></span><span class=line><span class=cl>            @showActivityDetailsModal=&amp;#34;showActivityDetailsModal($event)&amp;#34;
</span></span><span class=line><span class=cl>          /&amp;gt;
</span></span><span class=line><span class=cl>          &amp;lt;YGBWAds /&amp;gt;
</span></span><span class=line><span class=cl>          &amp;lt;ResultsList
</span></span><span class=line><span class=cl>            :results=&amp;#34;data.table.slice(2)&amp;#34;
</span></span><span class=line><span class=cl>            :ages=&amp;#34;ages&amp;#34;
</span></span><span class=line><span class=cl>            :selected-ages=&amp;#34;selectedAges&amp;#34;
</span></span><span class=line><span class=cl>            :legacy-mode=&amp;#34;legacyMode&amp;#34;
</span></span><span class=line><span class=cl>            :disable-spots-available=&amp;#34;disableSpotsAvailable&amp;#34;
</span></span><span class=line><span class=cl>            @showActivityDetailsModal=&amp;#34;showActivityDetailsModal($event)&amp;#34;
</span></span><span class=line><span class=cl>          /&amp;gt;
</span></span></code></pre></div><p>where YGBWAds is custom component to render custom content in between the results.
See
<a href=https://github.com/ymcatwincities/openy_activity_finder/pull/148 target=_blank>https://github.com/ymcatwincities/openy_activity_finder/pull/148</a></p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-6baf5f590747c78e0e74a2ef64afd201>1 - Adding Activity Finder to your site</h1><p>Both v4 and v3 could live together as independent programs on your site, and they will show the same data from the Program Event Framework of Open Y
<img src=https://user-images.githubusercontent.com/563412/105326548-88222480-5bd6-11eb-8943-bd0b7c82db63.png alt=image></p><p>On the screenshot above you can see Open Y components in a list for both Activity Finder v3 and v4</p><p>In order to create v3 Activity Finder application you need to create 2 landing pages, referencing each other, one with Activity Finder [deprecated], another one with Activity Finder Search [deprecated]
<img src=https://user-images.githubusercontent.com/563412/105327229-5067ac80-5bd7-11eb-9546-d53a1956f976.png alt=image>
See</p><ul><li>Carnation
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder</a></li><li>Lily
<a href=https://sandbox-lily-cus-d9.openy.org/activity-finder target=_blank>https://sandbox-lily-cus-d9.openy.org/activity-finder</a></li><li>Rose
<a href=https://sandbox-rose-cus-d9.openy.org/activity-finder target=_blank>https://sandbox-rose-cus-d9.openy.org/activity-finder</a></li></ul><p><img src=https://user-images.githubusercontent.com/563412/105327376-7f7e1e00-5bd7-11eb-9bcc-5e3735018977.png alt=image>
See</p><ul><li>Carnation
<a href=https://sandbox-carnation-cus-d9.openy.org/program-search target=_blank>https://sandbox-carnation-cus-d9.openy.org/program-search</a></li><li>Lily
<a href=https://sandbox-lily-cus-d9.openy.org/program-search target=_blank>https://sandbox-lily-cus-d9.openy.org/program-search</a></li><li>Rose
<a href=https://sandbox-rose-cus-d9.openy.org/program-search target=_blank>https://sandbox-rose-cus-d9.openy.org/program-search</a></li></ul><p>In order to create v4 Activity Finder application, you need to create 1 landing page, with the Activity Finder component on it
<img src=https://user-images.githubusercontent.com/563412/105327534-a76d8180-5bd7-11eb-9f6b-bc88d325047e.png alt=image>
See sandbox</p><ul><li>Carnation
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4 target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4</a></li><li>Lily
<a href=https://sandbox-lily-cus-d9.openy.org/activity-finder-v4 target=_blank>https://sandbox-lily-cus-d9.openy.org/activity-finder-v4</a></li><li>Rose
<a href=https://sandbox-rose-cus-d9.openy.org/activity-finder-v4 target=_blank>https://sandbox-rose-cus-d9.openy.org/activity-finder-v4</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-b2056fc5cab10f929a44c332b8102fc8>2 - Bootstrap version support for Activity Finder</h1><p>In the Carnation theme we use bootstrap v 4.6 and for this case we have a special option Bootstrap version in settings form for Activity Finder v4
(/admin/openy/settings/activity-finder)</p><p><img src=https://user-images.githubusercontent.com/563412/130978526-fd949acf-1b00-4d20-93f0-cb339a23cb65.png alt=image></p><p>Rose and Lily themes are using Bootstrap v3, Carnation theme is on Bootstrap v4
And when we set it to 4 then the AF4 result page looks good for the tablet screen on Carnation
<img src=https://user-images.githubusercontent.com/563412/130978729-45954c96-2190-46c1-aa20-66cf596ab52d.png alt=image>
<img src=https://user-images.githubusercontent.com/563412/130978794-6d99e3cb-8794-4e13-bc9d-c181458b237f.png alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-64bd222410c78abcfc9f90c814006a69>3 - Configuring Solr for Activity Finder</h1><p>In order to install Open Y and Activity Finder v4 you need to run command</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>composer create-project ymcatwincities/openy-project build --no-interaction --prefer-dist
</span></span></code></pre></div><p>Which will pull Open Y on Drupal stable version with Activity Finder v4 latest stable version
Then you should proceed with a regular installation with Demo content enabled as described in our tutorials. It’s better to setup Extended or Custom( only via drush ) in order to skip a bunch of manual steps</p><p>When you have YMCA Website Services (former Open Y) installed, list of the command you need to run in order to enable Activity Finder v4</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Solr 8.8.1, Activity Finder v4</span>
</span></span><span class=line><span class=cl>drush en -y search_api_solr_legacy openy_prgf_activity_finder_4 <span class=o>||</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>drush en -dvy openy_prgf_af4_demo <span class=o>||</span> <span class=nb>true</span>
</span></span></code></pre></div><p>After enabling the above modules you should visit /admin/config/search/search-api and obtain config.zip from preconfigured by Open Y Solr Server setup
<img src=https://user-images.githubusercontent.com/563412/105169707-90ba2280-5b24-11eb-9c0c-fab09b336723.png alt=image></p><blockquote><p>Hint: Open Y module&rsquo;s infrastructure supports SOLR versions 8 up to the latest 8.8.1 as well. Activity Finder is tested against Solr 8.8.1. In order to install Solr -
<a href=https://www.drupal.org/node/2502203 target=_blank>check the documentation on Drupal.org</a>.
Solr versions prior 7.7 are End of Life, Open Y team is working on upgrading support for decent versions of Solr.</p></blockquote><p>This configuration should be installed on your Solr 8.8.1 server as a independent core. it should be extracted to conf directory of a solr core</p><p><img src=https://user-images.githubusercontent.com/563412/105169758-ad565a80-5b24-11eb-81c3-b29c8b513a7a.png alt=image></p><p>Once it is done - ensure the name of your core from core.properties file added to Solr Server config in Open Y
<img src=https://user-images.githubusercontent.com/563412/105169816-c0692a80-5b24-11eb-9254-6abc32a0583d.png alt=image></p><p>Solr server configuration could be found in Dropdown at /admin/config/search/search-api
<img src=https://user-images.githubusercontent.com/563412/105169887-d4149100-5b24-11eb-8a7c-d5186b8005bb.png alt=image>
<img src=https://user-images.githubusercontent.com/563412/105169954-eb537e80-5b24-11eb-8e21-3df8f01a8c14.png alt=image></p><p>If you prefer drush configuration you may use commands below, just replace SOLR_CORE_IS_HERE with real core name</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Solr 8.8.1, Activity Finder v4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>drush cset -y search_api.server.solr backend_config.connector_config.host 127.0.0.1 -y <span class=o>||</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>drush cset -y search_api.server.solr backend_config.connector_config.core <span class=si>${</span><span class=nv>SOLR_CORE_IS_HERE</span><span class=si>}</span> -y
</span></span><span class=line><span class=cl>drush cset -y search_api.server.solr backend_config.connector_config.solr_version <span class=m>8</span> -y
</span></span><span class=line><span class=cl>drush search-api-mark-all <span class=o>||</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>drush sapi-i <span class=o>||</span> <span class=nb>true</span>
</span></span></code></pre></div><p>Once you done this you should see Solr Server as Index as Enabled on a /admin/config/search/search-api</p><p>If you installed Open Y with Demo content now it is time to create a Landing Page with the Activity Finder v4 component on it.
In Open Y we have a specially created module which can this for you
Enable openy_prgf_af4_demo by drush command</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Solr 8.8.1, Activity Finder v4</span>
</span></span><span class=line><span class=cl>drush en -dvy openy_prgf_af4_demo <span class=o>||</span> <span class=nb>true</span>
</span></span></code></pre></div><p>and you’d get /activity-finder-v4 Landing Page created automatically which should look like
<img src=https://user-images.githubusercontent.com/563412/105170014-04f4c600-5b25-11eb-8a4a-b2952d86e7d3.png alt=image></p><p>when you visited it.
By visiting /activity-finder-v4?step=results or clicking on suggested buttons you should see results, activities with filters and all other functionality, shipped with Activity Finder v4
For the Demo content from OpenY, it should look like
<img src=https://user-images.githubusercontent.com/563412/105170087-1dfd7700-5b25-11eb-9e57-5db48e41af5e.png alt=image>
See sandboxes</p><ul><li>Carnation
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4 target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4</a></li><li>Lily
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4 target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4</a></li><li>Rose
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4 target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder-v4</a></li></ul><p>Activity Finder v3 also installed when you chose Custom Installation with Demo content and is part of demo content.
Could be accessed via /activity-finder url
See sandboxes</p><ul><li>Carnation
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder</a></li><li>Lily
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder</a></li><li>Rose
<a href=https://sandbox-carnation-cus-d9.openy.org/activity-finder target=_blank>https://sandbox-carnation-cus-d9.openy.org/activity-finder</a></li></ul><h3 id=development-solr-8-installation>Development SOLR 8 installation<a class=td-heading-self-link href=#development-solr-8-installation aria-label="Heading self-link"></a></h3><p>Solr Docker readme
<a href=https://github.com/docker-solr/docker-solr/blob/master/README.md target=_blank>https://github.com/docker-solr/docker-solr/blob/master/README.md</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>mkdir solr8
</span></span><span class=line><span class=cl>sudo chown 8983:8983 solr8
</span></span><span class=line><span class=cl>docker run -v <span class=s2>&#34;</span><span class=nv>$PWD</span><span class=s2>/solr8:/var/solr&#34;</span> -p 8984:8983 --name d9_sandbox_rose_custom solr solr-precreate d9_sandbox_rose_custom
</span></span><span class=line><span class=cl><span class=c1># stop docker and remove created container</span>
</span></span><span class=line><span class=cl><span class=c1># unpack solr_8.x_config.zip into data/d9_sandbox_rose_custom/conf/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>docker run -v <span class=s2>&#34;</span><span class=nv>$PWD</span><span class=s2>/solr8:/var/solr&#34;</span> -p 8984:8983 --name d9_sandbox_rose_custom solr solr-precreate d9_sandbox_rose_custom
</span></span></code></pre></div><p>Configure Open Y to change Solr version to 8.x
Change address port to 8984</p><p>Rebuild index information
Reindex
Check Activity Finder v4 is working now</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="YMCA Website Services" aria-label="YMCA Website Services"><a target=_blank rel=noopener href=https://ds.ymca.org/ aria-label="YMCA Website Services"><i class="fa fa-globe"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=LinkedIn aria-label=LinkedIn><a target=_blank rel=noopener href=https://www.linkedin.com/company/ymcausa/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=YouTube aria-label=YouTube><a target=_blank rel=noopener href=https://www.youtube.com/@ymcasdigitalservices aria-label=YouTube><i class="fab fa-youtube"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="YouTube (Archive)" aria-label="YouTube (Archive)"><a target=_blank rel=noopener href=https://www.youtube.com/channel/UC4hp3K9JFptqPZyNjJLvkJg aria-label="YouTube (Archive)"><i class="fab fa-youtube"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/YCloudYUSA/yusaopeny aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href="mailto:ycloud@ymca.net?subject=Slack%20Access%20Request" aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025
<span class=td-footer__authors>YMCA Website Services</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://ds.ymca.org/ target=_blank rel=noopener>https://ds.ymca.org/</a></span></div></div></div></footer></div><script src=/js/main.min.fd96d5f2e6c43bcf373f2ce509c626f962ebc9437b894f0cd006baa4a70248e3.js integrity="sha256-/ZbV8ubEO883PyzlCcYm+WLryUN7iU8M0Aa6pKcCSOM=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.6.0 integrity="sha512-FtDaTWf3IS29TLuYzTPlytjGqcXkwrzG9ivq7xXElnOZeiYTbcIy/hwXAgrrRNnI0+PfN+WFz4/+4phhJmuS8Q==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"IKYHW432S0",apiKey:"daf6dd319fdc9982386b73a0d53d9f89",indexName:"ds-y"})</script><script src=/js/tabpane-persist.js></script></body></html>