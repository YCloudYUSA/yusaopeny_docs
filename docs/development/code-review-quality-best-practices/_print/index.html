<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.139.4"><link rel=canonical type=text/html href=/docs/development/code-review-quality-best-practices/><link rel=alternate type=application/rss+xml href=/docs/development/code-review-quality-best-practices/index.xml><meta name=robots content="noindex, nofollow"><link rel=icon type=image/svg+xml href=/favicons/favicon.svg><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon.png><link rel=icon type=image/png href=/favicons/favicon-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/favicon-64x64.png sizes=64x64><link rel=icon type=image/png href=/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/favicon-128x128.png sizes=128x128><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Code Review Quality Best Practices | YMCA Website Services</title>
<meta name=description content="This document serves as an addition to our Code of Conduct and Best Practices. It is more technical and in-depth for specific cases that were discussed during code quality review processes the YMCA Website Services team has in place. During this process, all code should be reviewed by 1-2 developers before being merged into the YMCA Website Services codebase.
General Rules Components in YMCA Website Services (whether modules, themes, or other code structures) should be, as much as possible, reusable and atomic. All features, content types, settings, styles, etc. should be bundled together to create a cohesive component."><meta property="og:url" content="/docs/development/code-review-quality-best-practices/"><meta property="og:site_name" content="YMCA Website Services"><meta property="og:title" content="Code Review Quality Best Practices"><meta property="og:description" content="This document serves as an addition to our Code of Conduct and Best Practices. It is more technical and in-depth for specific cases that were discussed during code quality review processes the YMCA Website Services team has in place. During this process, all code should be reviewed by 1-2 developers before being merged into the YMCA Website Services codebase.
General Rules Components in YMCA Website Services (whether modules, themes, or other code structures) should be, as much as possible, reusable and atomic. All features, content types, settings, styles, etc. should be bundled together to create a cohesive component."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Code Review Quality Best Practices"><meta itemprop=description content="This document serves as an addition to our Code of Conduct and Best Practices. It is more technical and in-depth for specific cases that were discussed during code quality review processes the YMCA Website Services team has in place. During this process, all code should be reviewed by 1-2 developers before being merged into the YMCA Website Services codebase.
General Rules Components in YMCA Website Services (whether modules, themes, or other code structures) should be, as much as possible, reusable and atomic. All features, content types, settings, styles, etc. should be bundled together to create a cohesive component."><meta itemprop=dateModified content="2023-09-13T16:05:04-05:00"><meta itemprop=wordCount content="870"><meta name=twitter:card content="summary"><meta name=twitter:title content="Code Review Quality Best Practices"><meta name=twitter:description content="This document serves as an addition to our Code of Conduct and Best Practices. It is more technical and in-depth for specific cases that were discussed during code quality review processes the YMCA Website Services team has in place. During this process, all code should be reviewed by 1-2 developers before being merged into the YMCA Website Services codebase.
General Rules Components in YMCA Website Services (whether modules, themes, or other code structures) should be, as much as possible, reusable and atomic. All features, content types, settings, styles, etc. should be bundled together to create a cohesive component."><link rel=preload href=/scss/main.min.ba7dada1c07c0f45d2bd8f9ebeeb8a55b37178c66890f39fb1822de52264d26d.css as=style integrity="sha256-un2tocB8D0XSvY+evuuKVbNxeMZokPOfsYIt5SJk0m0=" crossorigin=anonymous><link href=/scss/main.min.ba7dada1c07c0f45d2bd8f9ebeeb8a55b37178c66890f39fb1822de52264d26d.css rel=stylesheet integrity="sha256-un2tocB8D0XSvY+evuuKVbNxeMZokPOfsYIt5SJk0m0=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script><link rel=preload href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.2 as=style integrity="sha512-TW5eKlwwg7OfQUVBqxjp94/uqtjJJbhkRE3++XGEQjAL1n3y//QVqS3acPkwqkzInaFRtj+w05uyxDbfDXiI1A==" crossorigin=anonymous onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.2 integrity="sha512-TW5eKlwwg7OfQUVBqxjp94/uqtjJJbhkRE3++XGEQjAL1n3y//QVqS3acPkwqkzInaFRtj+w05uyxDbfDXiI1A==" crossorigin=anonymous></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-3GMSKCY94X"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3GMSKCY94X")}</script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 288 221" enable-background="new 0 0 288 221"><path fill="#fff" d="M258.829.94h-82.891c-6.134.0-11.106 4.972-11.106 11.105.0 1.912.42 3.702 1.326 5.272l41.607 72.061a11.09 11.09.0 009.617 5.57c4.117.0 7.701-2.244 9.619-5.57l41.604-72.061c.908-1.57 1.328-3.36 1.328-5.272C269.934 5.912 264.967.94 258.829.94m17.034 6.017a6.07 6.07.0 016.074-6.068 6.064 6.064.0 016.062 6.068 6.065 6.065.0 01-6.062 6.071 6.07 6.07.0 01-6.074-6.071m1.252.0a4.832 4.832.0 004.822 4.817 4.83 4.83.0 004.811-4.817 4.82 4.82.0 00-4.811-4.81 4.823 4.823.0 00-4.822 4.81z"/><g><defs><rect id="SVGID_1_" width="288" height="221"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_2_)" fill="#fff" d="M284.217 10.003h-.578c-.225.0-.344-.027-.51-.221l-1.645-2.056h-.438v1.948c0 .248-.102.329-.314.329h-.4c-.273.0-.367-.053-.367-.329V4.221c0-.296.174-.307.367-.307h1.754c1 0 1.209.059 1.566.413.312.326.463.892.463 1.703.0 1.025-.412 1.601-1.344 1.67l1.562 1.866c.181.216.149.437-.116.437m-1.475-5.117c-.244-.12-1.385-.065-1.695-.065V6.82h1.162c.412.0.607-.067.719-.207.064-.107.131-.218.131-.665.0-.672-.108-.949-.317-1.062zm-152.965 98.36c0 .01.01.017.01.022v-.009l-.01-.013m73.032 1.39-.457-.79-52.35-90.674C145.639 5.613 137.273.94 127.98.94H85.549a8.573 8.573.0 00-8.571 8.57c0 1.471.34 2.881 1.024 4.06l51.785 89.698a27.014 27.014.0 013.728 13.735c0 4.864-1.281 9.424-3.517 13.371l-45.029 78.001c-.683 1.172-1.021 2.584-1.021 4.057a8.567 8.567.0 008.57 8.568h43.537c9.289.0 17.658-4.67 22.021-12.228l.896-1.56 43.299-74.998.807-1.395c2.207-3.827 3.227-8.203 3.227-12.854.0-4.846-1.242-9.423-3.496-13.329z"/></g><path fill="#fff" d="M83.18 140.865c-.793.0-1.584.327-2.309.457-2.436.527-5.139 1.058-8.037 1.058-1.582.0-3.035-.332-3.957-.726-2.041-.921-2.238-3.493-2.174-6.792h16.079c2.306.0 2.767-.392 2.767-4.016.0-4.223-.392-8.371-2.435-11.334-1.911-2.703-5.208-4.089-10.677-4.089-5.798.0-9.427 1.517-11.4 4.353-2.047 2.896-2.641 6.785-2.641 12.582.0 6.53.924 10.817 3.695 13.385 2.173 2.042 5.735 3.09 10.68 3.09 2.831.0 6.717-.261 9.942-.856 2.047-.327 2.375-1.378 2.375-2.898.0-.726.0-1.518-.127-2.173-.201-.858-.795-2.041-1.781-2.041M66.703 128.47c0-4.807.992-6.453 5.734-6.453 4.483.0 5.071 1.709 5.071 5.795v1.255H66.703v-.597zm-23.548-13.046c-3.562.0-6.722 1.184-8.902 2.239v-12.191c0-1.251-.524-2.838-2.566-2.838h-2.965c-1.91.0-2.899.594-2.899 2.838v39.875c0 1.578.526 2.629 2.375 2.629h3.489c2.042.0 2.566-1.119 2.566-2.964V129.91c0-4.726.978-6.338 5.633-6.338 4.406.0 4.988 1.679 4.988 5.688v1.232h-.018c.01.635.016 1.357.016 2.168v12.352c0 1.98.654 2.964 2.368 2.964h3.5c2.035.0 2.566-1.119 2.566-2.964v-20.227c0-4.29-2.045-9.361-10.151-9.361zM18.977 123.327h-7.115v13.25c0 3.095.133 4.283.396 4.808.198.335.532.529.987.529 1.849.0 3.884-.987 5.406-.987 1.451.0 1.783 1.12 1.783 1.841v2.373c0 2.439-.664 3.103-2.769 3.298-2.11.196-3.559.328-5.739.328-6.989.0-8.5-2.57-8.5-10.413v-15.026H1.58c-1.248.0-1.58-.855-1.58-1.908v-2.836c0-1.65.656-2.174 1.777-2.174h1.649v-5.34c0-2.24.922-2.902 2.834-2.902h2.967c2.041.0 2.635 1.648 2.635 2.902v5.34h6.461c1.447.0 2.24.198 2.24 2.109v2.304c0 2.239-.398 2.504-1.586 2.504m155.151 76.898 5.053 8.552 4.775 2.756c.662.384.797.88.422 1.517l-.541.961c-.43.733-.824.945-1.598.496l-4.598-2.654-10.481-.123c-.293.007-.572-.034-.773-.151-.549-.317-.414-.92-.205-1.278l.689-1.195c.383-.665.756-.745 1.287-.737l7.179.144-3.701-6.226c-.268-.45-.364-.806.021-1.471l.566-.976c.334-.582.795-.668 1.219-.422.266.151.539.549.686.807M196.514 192.042l-.539.93c-.383.664-.857.715-1.508.402l-9.376-4.642c.388.461.945 1.079 1.377 1.563 1.676 1.976 3.5 4.006 4.571 5.369.43.543.584.991.164 1.715l-.332.582c-.426.734-.876.804-1.562.701-1.713-.25-4.413-.767-6.963-1.234-.646-.106-1.436-.326-2.029-.43l8.705 5.804c.602.406.793.845.412 1.502l-.541.937c-.398.687-.867 1.035-1.652.496l-12.277-8.604c-.76-.526-.567-1.065-.258-1.601l.705-1.222c.357-.618.74-.816 1.344-.734 2.521.359 6.938 1.219 10.326 1.811-2.209-2.633-5.166-6.028-6.736-8.032-.371-.481-.391-.906-.031-1.528l.703-1.222c.309-.531.682-.97 1.516-.578l13.585 6.336c.859.4.794.986.396 1.679M203.475 180.39c-.486.998-.758 1.57-1.35 2.595-.477.825-1.117 1.787-1.781 2.468-2.541 2.655-5.602 1.803-9.447-.416-6.528-3.771-6.558-6.541-4.058-10.873.594-1.023.955-1.554 1.574-2.47.592-.873.949-.992 1.449-.703l.731.421c.795.459.984.75.574 1.454-.475.828-.818 1.164-1.497 2.341-.414.711-1.012 1.903-1.088 2.602-.178 1.642 1.554 2.699 4.108 4.168 2.512 1.453 4.541 2.453 6.01.727.299-.361.705-.957 1.102-1.645.68-1.178.803-1.645 1.273-2.469.408-.709.752-.687 1.555-.224l.734.421c.488.281.572.656.111 1.603M211.623 165.868l-.705 1.221c-.398.688-.844.697-1.381.594l-3.344-.621c-.529.97-.936 1.679-1.505 2.654a94.672 94.672.0 01-1.493 2.539l2.105 2.406c.486.545.715.916.277 1.666l-.588 1.028c-.438.758-.701.75-1.031.556-.135-.072-.365-.296-.588-.576l-10.078-11.888c-.547-.648-.719-1.07-.242-1.889l.523-.909c.473-.826.93-.892 1.736-.75l15.719 2.678c.139.019.273.041.391.106.55.319.409.828.204 1.185m-14.471-.537 4.211 4.809c.297-.516.621-1.127.992-1.768.398-.693.691-1.148 1.062-1.791l-6.265-1.25z"/></svg></span><span class=navbar-brand__name>YMCA Website Services</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/community/><span>Community</span></a></li><li class=nav-item><a class=nav-link href=/docs/glossary/><span>Glossary</span></a></li><li class=nav-item><a class=nav-link href=/roadmap/><span>Roadmap</span></a></li><li class=nav-item><a class=nav-link href=/blog/><span>Updates</span></a></li><li class="td-light-dark-menu nav-item dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-1></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/development/code-review-quality-best-practices/>Return to the regular view of this page</a>.</p></div><h1 class=title>Code Review Quality Best Practices</h1><ul></ul><div class=content><p>This document serves as an addition to our
<a href=/docs/development/open-y-code-of-conduct-and-best-practices/>Code of Conduct and Best Practices</a>. It is more technical and in-depth for specific cases that were discussed during code quality review processes the YMCA Website Services team has in place. During this process, all code should be reviewed by 1-2 developers before being merged into the YMCA Website Services codebase.</p><h1 id=general-rules>General Rules<a class=td-heading-self-link href=#general-rules aria-label="Heading self-link"></a></h1><p>Components in YMCA Website Services (whether modules, themes, or other code structures) should be, as much as possible, reusable and atomic. All features, content types, settings, styles, etc. should be bundled together to create a cohesive component.</p><ol><li>General naming conventions<ol><li>Features module naming<ol><li><strong>openy_${entity_type|abbr}_${entity_bundle|abbr}_${feature|optional}</strong><ol><li>Example: <strong>openy_node_blog_feature</strong></li><li><strong>openy_prgf_sc_feature</strong> -> OpenY Paragraph Simple Content (name within yml)</li></ol></li></ol></li><li>Fields naming (&lt;=20 chars)<ol><li><strong>field_${entity_type|abbr}_${entity_bundle|abbr}_{name|abbr}</strong><ol><li>Example: <strong>field_prgf_sc_body</strong></li></ol></li></ol></li><li><strong>All descriptions are mandatory!</strong></li></ol></li><li>Module naming conventions - Depending on the context we should choose the name from this list:<ol><li><strong>${project_name|abbr}_${business_name|abbr</strong>} - when the code looks like legacy and has specifics that are not ready to be open-sourced</li><li><strong>openy_${business_name|abbr}</strong> - when the code is ready to be ejected to OpenY package</li><li><strong>${business_name}</strong> - when the code is so abstract that it has no connection to OpenY and is ready to be hosted on Drupal.org as an independent project.</li></ol></li></ol><h2 id=code-sharing>Code Sharing<a class=td-heading-self-link href=#code-sharing aria-label="Heading self-link"></a></h2><p>To support reuse by the community, the MODULE-NAME should relate to the business logic of the module. It is not good to create modules by abstracting them out of the business. All modules that have been shared to drupal.org from past projects were possible to share only because they represent some feature, tied to a business need. For example:</p><ul><li>personify - module for SOAP related methods for working with Personify API</li><li>acrypt - Asymmetric crypt algorithm</li></ul><p>and so on.</p><h1 id=php>PHP<a class=td-heading-self-link href=#php aria-label="Heading self-link"></a></h1><h2 id=return-early-pattern>Return early pattern<a class=td-heading-self-link href=#return-early-pattern aria-label="Heading self-link"></a></h2><p>To keep readability in functions and methods, it is wise to return early if simple conditions apply that can be checked at the beginning of a method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>foo</span><span class=p>(</span><span class=nv>$bar</span><span class=p>,</span> <span class=nv>$baz</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$foo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// logic goes here
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=nv>$calculated_value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></div><p>It&rsquo;s better to return early, keeping indentation and brainpower needed to follow the code low.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>foo</span><span class=p>(</span><span class=nv>$bar</span><span class=p>,</span> <span class=nv>$baz</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nv>$foo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// logic goes here
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nv>$calculated_value</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></div><h2 id=define-early-pattern>Define early pattern<a class=td-heading-self-link href=#define-early-pattern aria-label="Heading self-link"></a></h2><p>When you have a condition that aims to change the value of a variable without additional logic, get rid of <code>if else elseif</code> code and instead define your variable early and change it via conditions.</p><p>Before:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$a</span> <span class=o>=</span> <span class=s1>&#39;hello&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nv>$text</span> <span class=o>=</span> <span class=s1>&#39;Welcome to site&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nv>$text</span> <span class=o>=</span> <span class=s1>&#39;Register please&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>After:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=</span> <span class=s1>&#39;Register please&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$a</span> <span class=o>=</span> <span class=s1>&#39;hello&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nv>$text</span> <span class=o>=</span> <span class=s1>&#39;Welcome to site&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=null-checks-with-isset>Null Checks with <code>isset</code><a class=td-heading-self-link href=#null-checks-with-isset aria-label="Heading self-link"></a></h2><p><a href=https://www.php.net/manual/en/function.isset.php target=_blank><code>isset()</code></a> verifies if set and not null. There is no need to do additional verification against NULL.</p><p>Before:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;video&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span><span class=nx>isset</span><span class=p>(</span><span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_videos&#39;</span><span class=p>])</span> <span class=o>||</span> <span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_videos&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=k>NULL</span><span class=p>)</span> <span class=o>?</span> <span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_videos&#39;</span><span class=p>]</span> <span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><p>After:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;video&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span><span class=nx>isset</span><span class=p>(</span><span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_videos&#39;</span><span class=p>]))</span> <span class=o>?</span> <span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_videos&#39;</span><span class=p>]</span> <span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><h2 id=dependency-injection>Dependency Injection<a class=td-heading-self-link href=#dependency-injection aria-label="Heading self-link"></a></h2><p>For the decoupled and easier to upgrade code in Drupal 8+ Dependency injection should be used instead of calling methods from services statically.</p><p>See the Drupal API
<a href=https://api.drupal.org/api/drupal/core%21core.api.php/group/container/9.3.x target=_blank>Overview of the Dependency Injection Container and Services</a>.</p><p>Before:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=nv>$node</span> <span class=o>=</span> <span class=nx>Drupal</span><span class=o>::</span><span class=na>entityTypeManager</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>getStorage</span><span class=p>(</span><span class=s1>&#39;node&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>load</span><span class=p>(</span><span class=nv>$result</span><span class=o>-&gt;</span><span class=na>getField</span><span class=p>(</span><span class=s1>&#39;nid&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>getValues</span><span class=p>()[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><p>After:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$node</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>entityTypeManager</span><span class=o>-&gt;</span><span class=na>getStorage</span><span class=p>(</span><span class=s1>&#39;node&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>load</span><span class=p>(</span><span class=nv>$result</span><span class=o>-&gt;</span><span class=na>getField</span><span class=p>(</span><span class=s1>&#39;nid&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>getValues</span><span class=p>()[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><h2 id=creating-meaningful-log-messages>Creating meaningful log messages<a class=td-heading-self-link href=#creating-meaningful-log-messages aria-label="Heading self-link"></a></h2><p>To provide useful logging for site managers, we need to write meaningful log messages with a proper context.</p><p>Before:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=nv>$type</span> <span class=o>==</span> <span class=s1>&#39;program&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_videos&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=k>NULL</span> <span class=o>||</span> <span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_images&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=k>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>\Drupal</span><span class=o>::</span><span class=na>logger</span><span class=p>(</span><span class=s1>&#39;272&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>notice</span><span class=p>(</span><span class=nv>$type</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><p>After:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=nv>$type</span> <span class=o>==</span> <span class=s1>&#39;program&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_videos&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=k>NULL</span> <span class=o>||</span> <span class=nv>$feed</span><span class=p>[</span><span class=s1>&#39;profile_media_images&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=k>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>\Drupal</span><span class=o>::</span><span class=na>logger</span><span class=p>(</span><span class=s1>&#39;form_import&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>notice</span><span class=p>(</span><span class=s2>&#34;FORM IMPORT: type is </span><span class=si>$type</span><span class=s2>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><h1 id=maintaining-an-upgrade-path>Maintaining an Upgrade Path<a class=td-heading-self-link href=#maintaining-an-upgrade-path aria-label="Heading self-link"></a></h1><p>All changes in configurations should be added to appropriate hook_update_N to update already existing environments. We suggest using the
<a href=https://www.drupal.org/project/confi target=_blank>Config Importer and Tools
</a>package for working with hook_update_N.</p><h2 id=install-files>Install files<a class=td-heading-self-link href=#install-files aria-label="Heading self-link"></a></h2><h3 id=openyinstall-in-profile><code>openy.install</code> in profile<a class=td-heading-self-link href=#openyinstall-in-profile aria-label="Heading self-link"></a></h3><p>In this file, we should put updates that are related to the distribution in general and don&rsquo;t fit into any feature.</p><ul><li>Enable/Disable module</li><li>General configs</li></ul><h3 id=openy_install-in-modules><code>openy_*.install</code> in modules<a class=td-heading-self-link href=#openy_install-in-modules aria-label="Heading self-link"></a></h3><p>If you update some configuration for a specific feature, make sure that you put updates into this file in the appropriate module.</p><h2 id=config-management>Config Management<a class=td-heading-self-link href=#config-management aria-label="Heading self-link"></a></h2><h3 id=revert-only-specific-property-from-config>Revert only specific property from config<a class=td-heading-self-link href=#revert-only-specific-property-from-config aria-label="Heading self-link"></a></h3><p>This is the preferred method of updating configs as it will result in fewer conflicts for upgrading customized YMCA Website Services instances.</p><p>With
<a href=https://www.drupal.org/project/confi target=_blank>config_import module</a> we can update only part of the full config.</p><p>For updating specific property in config use the <code>openy_upgrade_tool.param_updater</code> service:</p><ol><li>Find the module where your config lives.</li><li>Create a new <code>hook_update_N</code> in the <code>openy_*.install</code> file.</li><li>In that hook add the update code (for example):</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$config</span> <span class=o>=</span> <span class=nx>drupal_get_path</span><span class=p>(</span><span class=s1>&#39;module&#39;</span><span class=p>,</span> <span class=s1>&#39;openy_media_image&#39;</span><span class=p>)</span> <span class=o>.</span> <span class=s1>&#39;/config/install/views.view.images_library.yml&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config_importer</span> <span class=o>=</span> <span class=nx>\Drupal</span><span class=o>::</span><span class=na>service</span><span class=p>(</span><span class=s1>&#39;openy_upgrade_tool.param_updater&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$config_importer</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>(</span><span class=nv>$config</span><span class=p>,</span> <span class=s1>&#39;views.view.images_library&#39;</span><span class=p>,</span> <span class=s1>&#39;display.default.display_options.pager&#39;</span><span class=p>);</span>
</span></span></code></pre></div><p>Where:</p><ul><li><code>$config</code> variable contains path to config with config name, like:</li><li><code>views.view.images_library</code> - config name</li><li><code>display.default.display_options.pager</code> - config specific property (you can set value from a nested array with variable depth)</li></ul><h3 id=revert-full-configs>Revert full configs<a class=td-heading-self-link href=#revert-full-configs aria-label="Heading self-link"></a></h3><p>This variant uses extensive config file manipulation and increases the time for an upgrade.</p><p>For updating full config or several configs from directory use the <code>openy_upgrade_tool.importer</code> service:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$config_dir</span> <span class=o>=</span> <span class=nx>drupal_get_path</span><span class=p>(</span><span class=s1>&#39;module&#39;</span><span class=p>,</span> <span class=s1>&#39;openy_media_image&#39;</span><span class=p>)</span> <span class=o>.</span> <span class=s1>&#39;/config/install&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config_importer</span> <span class=o>=</span> <span class=nx>\Drupal</span><span class=o>::</span><span class=na>service</span><span class=p>(</span><span class=s1>&#39;openy_upgrade_tool.importer&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$config_importer</span><span class=o>-&gt;</span><span class=na>setDirectory</span><span class=p>(</span><span class=nv>$config_dir</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$config_importer</span><span class=o>-&gt;</span><span class=na>importConfigs</span><span class=p>([</span><span class=s1>&#39;views.view.images_library&#39;</span><span class=p>]);</span>
</span></span></code></pre></div><p>Where:</p><ul><li><code>$config_dir</code> - path to directory with config</li><li><code>views.view.images_library</code> - config name</li></ul><p>Also you can update several configs from a directory:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$config_importer</span><span class=o>-&gt;</span><span class=na>importConfigs</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;views.view.images_library&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;views.view.example_view&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span></code></pre></div><h1 id=javascript-includes>JavaScript includes<a class=td-heading-self-link href=#javascript-includes aria-label="Heading self-link"></a></h1><p><img src=https://user-images.githubusercontent.com/563412/122801945-6f28b700-d2cd-11eb-8d0c-694432e8cbf0.png alt=image></p></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="YMCA Website Services" aria-label="YMCA Website Services"><a target=_blank rel=noopener href=https://ds.ymca.org/ aria-label="YMCA Website Services"><i class="fa fa-globe"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=LinkedIn aria-label=LinkedIn><a target=_blank rel=noopener href=https://www.linkedin.com/company/ymcausa/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=YouTube aria-label=YouTube><a target=_blank rel=noopener href=https://www.youtube.com/@ymcasdigitalservices aria-label=YouTube><i class="fab fa-youtube"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="YouTube (Archive)" aria-label="YouTube (Archive)"><a target=_blank rel=noopener href=https://www.youtube.com/channel/UC4hp3K9JFptqPZyNjJLvkJg aria-label="YouTube (Archive)"><i class="fab fa-youtube"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/YCloudYUSA/yusaopeny aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href="mailto:ycloud@ymca.net?subject=Slack%20Access%20Request" aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025
<span class=td-footer__authors>YMCA Website Services</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://ds.ymca.org/ target=_blank rel=noopener>https://ds.ymca.org/</a></span></div></div></div></footer></div><script src=/js/main.min.fd96d5f2e6c43bcf373f2ce509c626f962ebc9437b894f0cd006baa4a70248e3.js integrity="sha256-/ZbV8ubEO883PyzlCcYm+WLryUN7iU8M0Aa6pKcCSOM=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.6.0 integrity="sha512-FtDaTWf3IS29TLuYzTPlytjGqcXkwrzG9ivq7xXElnOZeiYTbcIy/hwXAgrrRNnI0+PfN+WFz4/+4phhJmuS8Q==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"IKYHW432S0",apiKey:"daf6dd319fdc9982386b73a0d53d9f89",indexName:"ds-y"})</script><script src=/js/tabpane-persist.js></script></body></html>